---
title: Upgrading the IPsec Add-on for PCF
owner: Security Engineering
---

<strong><%= modified_date %></strong>

This topic describes how to upgrade the IPsec Add-on for PCF.

To upgrade the IPsec add-on to a later version, do the following:

1. Retrieve the latest runtime config by running one of the following commands:
  * **For Ops Manager v1.10 or earlier:**
    `bosh runtime-config > PATH-TO-SAVE-THE-RUNTIME-CONFIG`
  * **For Ops Manager v1.11 or later:**
    `bosh2 -e BOSH_ENVIRONMENT runtime-config > PATH-TO-SAVE-THE-RUNTIME-CONFIG`

2. Upload the latest IPsec Release:
  * **For Ops Manager v1.10 or earlier:**
    `bosh upload release PATH-TO-NEW-IPSEC-RELEASE`
  * **For Ops Manager v1.11 or later:**
    `bosh2 -e BOSH_ENVIRONMENT upload-release PATH-TO-NEW-IPSEC-RELEASE`

3. Change the release version.
  <pre>
releases:
\- {name: ipsec, version: NEW\_VERSION}
  </pre>

4. Update the runtime config by running one of the following commands:
  * **For Ops Manager v1.10 or earlier:**
    `bosh update runtime-config PATH-TO-SAVE-THE-RUNTIME-CONFIG`
  * **For Ops Manager v1.11 or later:**
    `bosh2 -e BOSH_ENVIRONMENT update-runtime-config --name=ipsec PATH-TO-SAVE-THE-RUNTIME-CONFIG`
    <p class="note warning"><strong>WARNING</strong>: Remove references to IPsec from the default runtime-config, i.e. <br/>
    <code>bosh2 -e BOSH-ENVIRONMENT runtime-config > /tmp/runtime-config</code><br/>
    remove IPsec references from <code>/tmp/runtime-config</code> <br/>
    <code>bosh2 -e BOSH-ENVIRONMENT update-runtime-config /tmp/runtime-config</code>
    </p>

5. Navigate to your **Installation Dashboard** in Ops Manager.
6. Click **Apply Changes**.
